//残営業日
var koyomi = require('../..').create();
var remain = koyomi.remainBiz.bind(koyomi);
var eq = require('assert').equal;
require('../../date-extra');

koyomi.startMonth = 1;
koyomi.startWeek = '日';
koyomi.regularHoliday ='土,日';
koyomi.seasonHoliday  = '12/29-1/4';
koyomi.openOnHoliday  = false;

eq(remain(20150101, 'y'), 19 + 19 + 22 + 21 + 18 + 22 + 22 + 21 + 19 + 21 + 19 + 19);
eq(remain(20150102, 'y'), 19 + 19 + 22 + 21 + 18 + 22 + 22 + 21 + 19 + 21 + 19 + 19);
eq(remain(20150105, 'y'), 19 + 19 + 22 + 21 + 18 + 22 + 22 + 21 + 19 + 21 + 19 + 19);
eq(remain(20150106, 'y'), 18 + 19 + 22 + 21 + 18 + 22 + 22 + 21 + 19 + 21 + 19 + 19);
// 月
eq(remain(20150501, 'm'), 18);
eq(remain(20150502, 'm'), 17);
eq(remain(20150503, 'm'), 17);
eq(remain(20150504, 'm'), 17);
eq(remain(20150505, 'm'), 17);
eq(remain(20150506, 'm'), 17);
eq(remain(20150507, 'm'), 17);
eq(remain(20150508, 'm'), 16);
eq(remain(20150509, 'm'), 15);
eq(remain(20150510, 'm'), 15);
eq(remain(20150511, 'm'), 15);
eq(remain(20150512, 'm'), 14);
eq(remain(20150513, 'm'), 13);
eq(remain(20150514, 'm'), 12);
eq(remain(20150515, 'm'), 11);
eq(remain(20150516, 'm'), 10);
eq(remain(20150517, 'm'), 10);
eq(remain(20150518, 'm'), 10);
eq(remain(20150519, 'm'),  9);
eq(remain(20150520, 'm'),  8);
eq(remain(20150521, 'm'),  7);
eq(remain(20150522, 'm'),  6);
eq(remain(20150523, 'm'),  5);
eq(remain(20150524, 'm'),  5);
eq(remain(20150525, 'm'),  5);
eq(remain(20150526, 'm'),  4);
eq(remain(20150527, 'm'),  3);
eq(remain(20150528, 'm'),  2);
eq(remain(20150529, 'm'),  1);
eq(remain(20150530, 'm'),  0);
eq(remain(20150531, 'm'),  0);

// 年
koyomi.startMonth = 1;
eq(remain(20150101, 'y'), 242);
eq(remain(20151231, 'y'),   0);

koyomi.startMonth = 4;
eq(                  221,      18 + 22 + 22 + 21 + 19 + 21 + 19 + 19 + 18 + 20 + 22);
eq(remain(20150401, 'y'), 21 + 221);
eq(remain(20150402, 'y'), 20 + 221);
eq(remain(20150403, 'y'), 19 + 221);
eq(remain(20150404, 'y'), 18 + 221);
eq(remain(20150405, 'y'), 18 + 221);
eq(remain(20150406, 'y'), 18 + 221);
eq(remain(20150407, 'y'), 17 + 221);
eq(remain(20150408, 'y'), 16 + 221);
eq(remain(20150409, 'y'), 15 + 221);
eq(remain(20150410, 'y'), 14 + 221);
eq(remain(20150411, 'y'), 13 + 221);
eq(remain(20150412, 'y'), 13 + 221);
eq(remain(20150413, 'y'), 13 + 221);
eq(remain(20150414, 'y'), 12 + 221);
eq(remain(20150415, 'y'), 11 + 221);
eq(remain(20150416, 'y'), 10 + 221);
eq(remain(20150417, 'y'),  9 + 221);
eq(remain(20150418, 'y'),  8 + 221);
eq(remain(20150419, 'y'),  8 + 221);
eq(remain(20150420, 'y'),  8 + 221);
eq(remain(20150421, 'y'),  7 + 221);
eq(remain(20150422, 'y'),  6 + 221);
eq(remain(20150423, 'y'),  5 + 221);
eq(remain(20150424, 'y'),  4 + 221);
eq(remain(20150425, 'y'),  3 + 221);
eq(remain(20150426, 'y'),  3 + 221);
eq(remain(20150427, 'y'),  3 + 221);
eq(remain(20150428, 'y'),  2 + 221);
eq(remain(20150429, 'y'),  1 + 221);
eq(remain(20150430, 'y'),  1 + 221);

eq(                  203,      22 + 22 + 21 + 19 + 21 + 19 + 19 + 18 + 20 + 22);
eq(remain(20150501, 'y'), 18 + 203);
eq(remain(20150502, 'y'), 17 + 203);
eq(remain(20150503, 'y'), 17 + 203);
eq(remain(20150504, 'y'), 17 + 203);
eq(remain(20150505, 'y'), 17 + 203);
eq(remain(20150506, 'y'), 17 + 203);
eq(remain(20150507, 'y'), 17 + 203);
eq(remain(20150508, 'y'), 16 + 203);
eq(remain(20150509, 'y'), 15 + 203);
eq(remain(20150510, 'y'), 15 + 203);
eq(remain(20150511, 'y'), 15 + 203);
eq(remain(20150512, 'y'), 14 + 203);
eq(remain(20150513, 'y'), 13 + 203);
eq(remain(20150514, 'y'), 12 + 203);
eq(remain(20150515, 'y'), 11 + 203);
eq(remain(20150516, 'y'), 10 + 203);
eq(remain(20150517, 'y'), 10 + 203);
eq(remain(20150518, 'y'), 10 + 203);
eq(remain(20150519, 'y'),  9 + 203);
eq(remain(20150520, 'y'),  8 + 203);
eq(remain(20150521, 'y'),  7 + 203);
eq(remain(20150522, 'y'),  6 + 203);
eq(remain(20150523, 'y'),  5 + 203);
eq(remain(20150524, 'y'),  5 + 203);
eq(remain(20150525, 'y'),  5 + 203);
eq(remain(20150526, 'y'),  4 + 203);
eq(remain(20150527, 'y'),  3 + 203);
eq(remain(20150528, 'y'),  2 + 203);
eq(remain(20150529, 'y'),  1 + 203);
eq(remain(20150530, 'y'),  0 + 203);
eq(remain(20150531, 'y'),  0 + 203);

eq(remain(20160301, 'y'), 22);
eq(remain(20160302, 'y'), 21);
eq(remain(20160303, 'y'), 20);
eq(remain(20160304, 'y'), 19);
eq(remain(20160305, 'y'), 18);
eq(remain(20160306, 'y'), 18);
eq(remain(20160307, 'y'), 18);
eq(remain(20160308, 'y'), 17);
eq(remain(20160309, 'y'), 16);
eq(remain(20160310, 'y'), 15);
eq(remain(20160311, 'y'), 14);
eq(remain(20160312, 'y'), 13);
eq(remain(20160313, 'y'), 13);
eq(remain(20160314, 'y'), 13);
eq(remain(20160315, 'y'), 12);
eq(remain(20160316, 'y'), 11);
eq(remain(20160317, 'y'), 10);
eq(remain(20160318, 'y'), 9);
eq(remain(20160319, 'y'), 8);
eq(remain(20160320, 'y'), 8);
eq(remain(20160321, 'y'), 8);
eq(remain(20160322, 'y'), 8);
eq(remain(20160323, 'y'), 7);
eq(remain(20160324, 'y'), 6);
eq(remain(20160325, 'y'), 5);
eq(remain(20160326, 'y'), 4);
eq(remain(20160327, 'y'), 4);
eq(remain(20160328, 'y'), 4);
eq(remain(20160329, 'y'), 3);
eq(remain(20160330, 'y'), 2);
eq(remain(20160331, 'y'), 1);
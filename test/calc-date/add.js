// 日計算
var koyomi = require('../..').create();
var add = koyomi.add.bind(koyomi);
var eq = require('assert').deepEqual;
var D = require('../../date-extra.js');

eq(add('2015-1-1', '5年'), D(2020, 1, 1));
eq(add('2015-1-2', '5日'), D(2015, 1, 7));

eq(add('2015-1-1 00:00:00', '1年')    , D(2016, 1, 1            ));
eq(add('2015-1-1 00:00:00', '1ヶ月')  , D(2015, 2, 1            ));
eq(add('2015-1-1 00:00:00', '1週間')  , D(2015, 1, 8            ));
eq(add('2015-1-1 00:00:00', '1日')    , D(2015, 1, 2            ));
eq(add('2015-1-1 00:00:00', '1時間')  , D(2015, 1, 1, 1, 0, 0   ));
eq(add('2015-1-1 00:00:00', '1分')    , D(2015, 1, 1, 0, 1, 0   ));
eq(add('2015-1-1 00:00:00', '1秒')    , D(2015, 1, 1, 0, 0, 1   ));
eq(add('2015-1-1 00:00:00', '1ミリ秒'), D(2015, 1, 1, 0, 0, 0, 1));


eq(add('2015-2-28', '1年'), D(2016, 2, 28));
eq(add('2016-2-29', '1年'), D(2017, 2, 28));
eq(add('2016-2-29', '4年'), D(2020, 2, 29));

eq(add('2015-1-31', '0ケ月'), D(2015, 1, 31));
eq(add('2015-1-31', '1ケ月'), D(2015, 2, 28));
eq(add('2015-1-31', '2ケ月'), D(2015, 3, 31));
eq(add('2015-1-31', '3ケ月'), D(2015, 4, 30));

eq(add('2015-1-31', '3ケ月前'), D(2014, 10, 31));

eq(add('2015-1-1', '1年3ヶ月'  ), D(2016, 4, 1));
eq(add('2015-1-1', '１年３ヶ月'), D(2016, 4, 1));
eq(add('2015-1-1', '一年三ヶ月'), D(2016, 4, 1));

eq(add('2015-1-1', '一年三ヶ月前'), D(2013, 10, 1));

eq(add('2016-1-1', '春まで'), null);
eq(add('2016-1-1', 'あと1日'), null);